$(function(e,t){var r=new e,i=location.protocol+"//"+location.host,t=t;r.setFromURL("query").getJSON("/posts.json").done(function(e){var n,l,o,s=$(".search-results-count"),f=$(".search-results"),c=0;n=lunr(function(){this.field("title"),this.field("category"),this.field("content"),this.ref("url"),this.field("date")}),$.each(e,function(e,t){n.add(t)}),l=n.search(r.get());for(var a in l)l[a].title=e.filter(function(e){return e.url===l[a].ref})[0].title;s.append(l.length+(1===l.length?" result":" results")+' for "'+r.get()+'"'),$.each(l,function(e,t){c+=t.score}),$.each(l,function(e,r){o=r.score/c,f.append('<li><a href="'+i+r.ref+'">'+r.title+"</a></li>"),f.children("li").last().css({"border-left":"20px solid "+t.shade("#ffffff",-o)})})})}(Query,utils));